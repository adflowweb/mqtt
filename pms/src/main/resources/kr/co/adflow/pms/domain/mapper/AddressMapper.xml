<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
     PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
     "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="kr.co.adflow.pms.domain.mapper.AddressMapper">

	<resultMap id="AddressResult" type="kr.co.adflow.pms.domain.Address">
		<result property="userId" column="user_id" />
		<result property="ufmi" column="ufmi" />
		<result property="ufmiName" column="ufmi_name" />
		<result property="item1" column="item_1" />
		<result property="item2" column="item_2" />
		<result property="item3" column="item_3" />
		<result property="issueTime" column="issue_time" />
		<result property="issueId" column="issue_id" />
	</resultMap>

	<insert id="insertAddress" parameterType="kr.co.adflow.pms.domain.Address">
		INSERT INTO pms.address
		(user_id
		,ufmi
		,ufmi_name
		,item_1
		,item_2
		,item_3
		,issue_time
		,issue_id
		)
		values(
		#{userId}
		,#{ufmi}
		,#{ufmiName}
		,#{item1}
		,#{item2}
		,#{item3}
		,now()
		,#{issueId}
		)
	</insert>
	
	<select id="selectAddress" parameterType="kr.co.adflow.pms.domain.AddressParams" resultMap="AddressResult">
		SELECT
		user_id
		,ufmi
		,ufmi_name
		,item_1
		,item_2
		,item_3
		,issue_time
		,issue_id
		FROM pms.address
		WHERE
		user_id = #{userId}
		AND ufmi = #{ufmi}
	</select>
	
	<select id="selectAddressList" parameterType="String" resultMap="AddressResult">
		SELECT
		user_id
		,ufmi
		,ufmi_name
		,item_1
		,item_2
		,item_3
		,issue_time
		,issue_id
		FROM pms.address
		WHERE
		user_id = #{userId}
	</select>
	
	<update id="updateAddress" parameterType="kr.co.adflow.pms.domain.Address">
		UPDATE pms.address
		SET
		ufmi_name = #{ufmiName}
		,item_1 = #{item1}
		,item_2 = #{item2}
		,item_3 = #{item3}
		WHERE
		user_id = #{userId}
		AND ufmi = #{ufmi}
	</update>
	
	
	
	<delete id="deleteAddress" parameterType="kr.co.adflow.pms.domain.AddressParams">
		DELETE FROM pms.address
		WHERE 
		user_id = #{userId}
		AND ufmi  IN
	 	 <foreach item="ufmi" index="index" collection="ufmiArray" open="(" separator="," close=")" >
			#{ufmi}
	  	 </foreach>
	</delete>
	
	
	
	
</mapper>	